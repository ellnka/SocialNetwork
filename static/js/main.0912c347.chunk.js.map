{"version":3,"sources":["redux/messages-reducer.js","services/api.js","components/common/Preloader/Preloader.jsx","redux/generic.js","redux/navbar-reducer.js","redux/auth-reducer.js","redux/app-reducer.js","redux/redux-store.js","components/hoc/withSuspense.js","components/Header/Header.jsx","components/Header/Auth.jsx","components/Header/HeaderContainer.jsx","components/Navbar/NavbarLogo.jsx","components/Navbar/NavbarSpacer.jsx","components/Navbar/NavbarItem.jsx","components/Navbar/Navbar.jsx","components/Navbar/NavbarContainer.jsx","components/Login/LoginFormFields.jsx","components/Login/LoginForm.jsx","components/Login/Login.jsx","components/Login/LoginContainer.jsx","App.js","index.js","redux/state.js","components/common/FormControls/FormControls.jsx","redux/profile-reducer.js","redux/posts-reducer.js","utils/helpers/objects.js","redux/users-reducer.js"],"names":["initState","state","messagesPage","sendMessageThunkCreator","message","dispatch","type","data","messagesReducer","action","id","messages","length","text","POSTS_URL","instance","Axios","create","withCredentials","baseURL","headers","API","currentPage","pageSize","get","email","password","rememberMe","post","delete","userId","put","status","Preloader","className","role","requestData","method","progressActionCreator","actionCreator","a","response","resultCode","navbarPage","navbarReducer","setUserData","setIsFetching","isFetching","userData","isAuth","getAuthUser","getAuthUserThunkCreator","authReducer","isInit","appReducer","reducers","combineReducers","profilePage","profileReducer","postsPage","postsReducer","usersPage","usersReducer","auth","app","form","FormReducer","composeEnhancers","composeWithDevTools","store","createStore","applyMiddleware","ThunkMiddleWare","window","reduxStore","withSuspense","Component","props","Suspense","fallback","Header","handleLogout","login","color","onClick","to","Auth","connect","logoutUser","NavbarLogo","logo","src","alt","logoText","NavbarSpacer","NavbarItem","url","item","link","charAt","Icon","icon","Feather","activeClassName","title","Navbar","menu","items","this","map","i","key","LoginFormInput","fieldName","placeholder","validate","label","htmlFor","createInputField","LoginFormCheckBox","LoginFormError","error","LoginFormButton","name","reduxForm","handleSubmit","onSubmit","Login","handleLoginUser","values","loginUser","stopSubmit","_error","ProfileContainer","React","lazy","PostsContainer","MessagesContainer","UsersContainer","App","initialize","NavbarContainer","tabIndex","path","render","compose","withRouter","promise","Promise","all","then","ReactDOM","basename","process","document","getElementById","subscribe","dialogs","user","posts","newPostText","users","FormControl","input","meta","isInvalid","touched","children","InputControl","restProps","validators","component","NEW_EDIT_PROFILE_FORM_NAME","FOLLOW","UNFOLLOW","setUserId","setIsUpdating","isUpdating","setStatus","setIsFollowStatusFetching","isFollowStatusFetching","setFollowed","setUnfollowed","isProfileFetching","userProfile","followed","_getUserProfile","getUserProfile","console","_getFollowStatus","getUserFollow","getUserProfileThunkCreator","getUserProfileStatusThunkCreator","getUserProfileStatus","changeUserProfileStatusThunkCreator","putUserProfileStatus","getAuthUserProfileThunkCreator","getContactError","errorContactField","match","obj","toLowerCase","contacts","changeUserProfileThunkCreator","putUserProfile","errorArr","followThunkCreator","postUserFollow","unfollowThunkCreator","deleteUserFollow","NEW_POST_FORM_NAME","setPosts","arePostsFetching","createNewPost","Date","toString","datetime","moment","format","putPosts","formName","reset","getPosts","getPostsThunkCreator","addNewPostThunkCreator","deletePostThunkCreator","postId","filter","stateCopy","updateObjectInArrayByValue","itemValue","objPropName","newObjProps","setUsers","setTotalUserCount","totalUserCount","setPageCount","pageCount","setCurrentPage","setIsFollowingProgress","setFollow","setUnfollow","followingInProgress","getUsersThunkCreator","getUsers","totalCount","Math","ceil"],"mappings":"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","file":"static/js/main.0912c347.chunk.js","sourcesContent":["import state from './state'\r\n\r\nexport const SEND_MESSAGE = 'messages/SEND-MESSAGE'\r\nexport const EDIT_MESSAGE = 'messages/EDIT-MESSAGE'\r\n\r\nexport const sendMessage = data => ({ type: SEND_MESSAGE, data })\r\n\r\nconst initState = state.messagesPage\r\n\r\nexport const sendMessageThunkCreator = (message) => (dispatch) => {\r\n  dispatch(sendMessage(message))\r\n}\r\n\r\nconst messagesReducer = (state = initState, action = {}) => {\r\n  switch (action.type) {\r\n    case SEND_MESSAGE: {\r\n      const message = {\r\n        id: state.messages.length,\r\n        text: action.data\r\n      }\r\n      return {\r\n        ...state,\r\n        messages: [\r\n          ...state.messages,\r\n          message\r\n        ]\r\n      }\r\n    }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport default messagesReducer\r\n","import Axios from 'axios'\r\n\r\nexport const LOGIN = 'free@samuraijs.com'\r\nexport const PASSWORD = 'free'\r\nexport const PERSONAL_API_KEY = 'd03460cc-dd7f-425e-86ff-ef080fabbdfa'\r\nexport const BASE_URL = 'https://social-network.samuraijs.com/api/1.0/'\r\nexport const API_KEY = 'd0ce4cd8-d0d2-4152-99ad-f6e1407cb23f'\r\nexport const POSTS_URL = 'https://api.myjson.com/bins/gkloi'\r\n\r\nconst instance = Axios.create(\r\n  {\r\n    withCredentials: true,\r\n    baseURL: BASE_URL,\r\n    headers: {\r\n      'API-KEY': PERSONAL_API_KEY\r\n    }\r\n  }\r\n)\r\n\r\nexport default class API {\r\n  static getUsers (currentPage = 1, pageSize = 10) {\r\n    return instance.get(`users?page=${currentPage}&count=${pageSize}`)\r\n  }\r\n\r\n  static getAuthUser () {\r\n    return instance.get('auth/me')\r\n  }\r\n\r\n  static loginUser (email, password, rememberMe) {\r\n    return instance.post('auth/login', {\r\n      email,\r\n      password,\r\n      rememberMe\r\n    })\r\n  }\r\n\r\n  static logoutUser () {\r\n    return instance.delete('auth/login')\r\n  }\r\n\r\n  static getUserProfile (userId) {\r\n    return instance.get(`profile/${userId}`)\r\n  }\r\n\r\n  static putUserProfile (data) {\r\n    return instance.put('profile', data)\r\n  }\r\n\r\n  static getUserProfileStatus (userId) {\r\n    return instance.get(`profile/status/${userId}`)\r\n  }\r\n\r\n  static putUserProfileStatus (status) {\r\n    return instance.put('profile/status/', { status })\r\n  }\r\n\r\n  static getUserFollow (userId) {\r\n    return instance.get(`follow/${userId}`)\r\n  }\r\n\r\n  static postUserFollow (userId) {\r\n    return instance.post(`follow/${userId}`, { userId })\r\n  }\r\n\r\n  static deleteUserFollow (userId) {\r\n    return instance.delete(`follow/${userId}`, { userId })\r\n  }\r\n\r\n  static getPosts () {\r\n    return Axios.get(POSTS_URL)\r\n  }\r\n\r\n  static putPosts (data) {\r\n    return Axios.put(POSTS_URL, { data })\r\n  }\r\n}\r\n","import React from 'react'\r\n\r\nconst Preloader = () => {\r\n  return (\r\n    <div className='spinner-border' role='status'>\r\n      <span className='sr-only'>Loading...</span>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Preloader\r\n","export const requestData = async (dispatch, method, progressActionCreator, actionCreator, data) => {\r\n  dispatch(progressActionCreator(true, data))\r\n  const response = await method(data)\r\n  if (response.data && response.data.resultCode === 0) {\r\n    dispatch(actionCreator(data))\r\n  }\r\n  dispatch(progressActionCreator(false, data))\r\n}\r\n","import state from './state'\r\n\r\nconst initState = state.navbarPage\r\n\r\nconst navbarReducer = (state = initState, action = {}) => {\r\n  return state\r\n}\r\n\r\nexport default navbarReducer\r\n","import API from './../services/api'\r\nimport { stopSubmit } from 'redux-form'\r\n\r\nexport const LOGIN_FORM_NAME = 'login'\r\n\r\nexport const SET_USER_DATA = 'auth/SET-USER-DATA'\r\nexport const SET_IS_AUTH = 'auth/SET-IS-AUTH'\r\nexport const SET_IS_FETCHING = 'auth/SET-IS-FETCHING'\r\n\r\nexport const setUserData = data => ({ type: SET_USER_DATA, data })\r\nexport const setIsAuth = isAuth => ({ type: SET_IS_AUTH, isAuth })\r\nexport const setAuthIsFetching = isAuth => ({ type: SET_IS_AUTH, isAuth })\r\nexport const setIsFetching = isFetching => ({ type: SET_IS_FETCHING, isFetching })\r\n\r\nconst initState = {\r\n  userData: null,\r\n  isAuth: false,\r\n  isFetching: false\r\n}\r\n\r\nconst getAuthUser = async (dispatch) => {\r\n  dispatch(setIsFetching(true))\r\n  try {\r\n    const response = await API.getAuthUser()\r\n    const resultCode = response.data && response.data.resultCode\r\n    if (resultCode === 0) {\r\n      dispatch(setUserData({ userData: response.data.data, isAuth: true }))\r\n    } else {\r\n      dispatch(setUserData({ userData: {}, isAuth: false }))\r\n    }\r\n  } finally {\r\n    dispatch(setIsFetching(false))\r\n  }\r\n}\r\n\r\nexport const getAuthUserThunkCreator = () => (dispatch) => {\r\n  getAuthUser(dispatch)\r\n}\r\n\r\nexport const loginUserThunkCreator = (email, password, rememberMe) => async (dispatch) => {\r\n  dispatch(setIsFetching(true))\r\n\r\n  const response = await API.loginUser(email, password, rememberMe)\r\n  const resultCode = response.data && response.data.resultCode\r\n  if (resultCode === 0) {\r\n    getAuthUser(dispatch)\r\n  } else {\r\n    const error = response.data.messages.length ? response.data.messages[0] : 'Something wrong...'\r\n    dispatch(stopSubmit(LOGIN_FORM_NAME, { _error: error }))\r\n  }\r\n}\r\n\r\nexport const logoutUserThunkCreator = () => async (dispatch) => {\r\n  const response = await API.logoutUser()\r\n  const resultCode = response.data.resultCode\r\n  if (resultCode === 0) {\r\n    dispatch(setUserData({ userData: null, isAuth: false }))\r\n  }\r\n}\r\n\r\nconst authReducer = (state = initState, action = {}) => {\r\n  switch (action.type) {\r\n    case SET_USER_DATA: {\r\n      return { ...state, ...action.data }\r\n    }\r\n    case SET_IS_AUTH: {\r\n      return { ...state, isAuth: action.isAuth }\r\n    }\r\n    case SET_IS_FETCHING: {\r\n      return { ...state, isFetching: action.isFetching }\r\n    }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport default authReducer\r\n","import { getAuthUserThunkCreator } from './auth-reducer'\r\n\r\nexport const SET_INIT = 'app/SET-INIT'\r\n\r\nexport const setIsInit = isInit => ({ type: SET_INIT, isInit })\r\n\r\nconst initState = {\r\n  isInit: false\r\n}\r\n\r\nexport const initializeThunkCreator = () => (dispatch) => {\r\n  const promise = dispatch(getAuthUserThunkCreator())\r\n  Promise.all([promise]).then(\r\n    dispatch(setIsInit(true)))\r\n}\r\n\r\nconst appReducer = (state = initState, action = {}) => {\r\n  switch (action.type) {\r\n    case SET_INIT: {\r\n      return { ...state, isInit: action.isInit }\r\n    }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport default appReducer\r\n","import { createStore, combineReducers, applyMiddleware } from 'redux'\r\nimport ThunkMiddleWare from 'redux-thunk'\r\nimport { reducer as FormReducer } from 'redux-form'\r\nimport { composeWithDevTools } from 'redux-devtools-extension'\r\nimport profileReducer from './profile-reducer'\r\nimport navbarReducer from './navbar-reducer'\r\nimport postsReducer from './posts-reducer'\r\nimport messagesReducer from './messages-reducer'\r\nimport usersReducer from './users-reducer'\r\nimport authReducer from './auth-reducer'\r\nimport appReducer from './app-reducer'\r\n\r\nconst reducers = combineReducers({\r\n  profilePage: profileReducer,\r\n  postsPage: postsReducer,\r\n  messagesPage: messagesReducer,\r\n  usersPage: usersReducer,\r\n  navbarPage: navbarReducer,\r\n  auth: authReducer,\r\n  app: appReducer,\r\n  form: FormReducer\r\n})\r\n\r\n// const store = createStore(reducers, applyMiddleware(ThunkMiddleWare))\r\n\r\nconst composeEnhancers = composeWithDevTools({\r\n  // Specify name here, actionsBlacklist, actionsCreators and other options if needed\r\n})\r\nconst store = createStore(reducers, /* preloadedState, */ composeEnhancers(\r\n  applyMiddleware(ThunkMiddleWare)\r\n  // other store enhancers if any\r\n))\r\nwindow.reduxStore = store\r\nexport default store\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport Preloader from '../common/Preloader/Preloader'\r\n\r\nexport const withSuspense = (Component) => (props) => <React.Suspense fallback={<Preloader />}><Component {...props} /></React.Suspense>\r\n\r\nwithSuspense.propTypes = {\r\n  Component: PropTypes.object\r\n}\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Button, Navbar } from 'reactstrap'\r\nimport { NavLink } from 'react-router-dom'\r\n\r\nconst Header = ({ userData, isAuth, handleLogout }) => (\r\n  <header className='app-header'>\r\n    <div className='login-box'>\r\n      <Navbar className='m1-auto top-nav'>\r\n        <nav className='nav'>\r\n          <li className='nav-item'><span className='nav-item-title'> {userData && userData.login} </span></li>\r\n        </nav>\r\n        <nav>\r\n          <li className='nav-item'>{isAuth && <Button color='secondary' onClick={handleLogout}>Logout</Button>}</li>\r\n        </nav>\r\n        <nav>\r\n          <li className='nav-item'>{!isAuth && <NavLink to='/login'>Login</NavLink>}</li>\r\n        </nav>\r\n      </Navbar>\r\n    </div>\r\n  </header>\r\n)\r\n\r\nHeader.propTypes = {\r\n  userData: PropTypes.object,\r\n  isAuth: PropTypes.bool,\r\n  handleLogout: PropTypes.func\r\n}\r\n\r\nexport default Header\r\n","import React from 'react'\r\n\r\nconst Auth = () => {\r\n  return (\r\n    <div> </div>\r\n  )\r\n}\r\n\r\nexport default Auth\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport {\r\n  setUserData,\r\n  getAuthUserThunkCreator,\r\n  logoutUserThunkCreator\r\n} from '../../redux/auth-reducer'\r\nimport Header from './Header'\r\nimport Auth from './Auth'\r\n\r\nconst HeaderContainer = ({ userData, isAuth, logoutUser }) => (\r\n  <div>\r\n    <Auth userData={userData} handleLogout={logoutUser} />\r\n    <Header userData={userData} handleLogout={logoutUser} isAuth={isAuth} />\r\n  </div>)\r\n\r\nHeaderContainer.propTypes = {\r\n  userData: PropTypes.object,\r\n  isAuth: PropTypes.bool,\r\n  logoutUser: PropTypes.func\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  userData: state.auth.userData,\r\n  isAuth: state.auth.isAuth\r\n})\r\n\r\nexport default connect(mapStateToProps, {\r\n  setUserData,\r\n  getAuthUser: getAuthUserThunkCreator,\r\n  logoutUser: logoutUserThunkCreator\r\n})(HeaderContainer)\r\n","import React from 'react'\r\nimport { NavLink } from 'react-router-dom'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst NavbarLogo = (props) => {\r\n  return (\r\n    <div className='site-logo-bar'>\r\n      <NavLink to='/' className='navbar-brand'>\r\n        {props.logo && <img src={props.logo} alt='' />}\r\n        {props.logoText && <span className='logo-text'>{props.logoText}</span>}\r\n      </NavLink>\r\n    </div>\r\n  )\r\n}\r\n\r\nNavbarLogo.propTypes = {\r\n  logo: PropTypes.string,\r\n  logoText: PropTypes.string\r\n}\r\n\r\nexport default NavbarLogo\r\n","import React from 'react'\r\n\r\nconst NavbarSpacer = () => {\r\n  return <li className='nav-item nav-item-spacer' />\r\n}\r\n\r\nexport default NavbarSpacer\r\n","import React from 'react'\r\nimport { NavLink } from 'react-router-dom'\r\nimport * as Feather from 'react-feather'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst NavbarItem = (props) => {\r\n  const url = props.item.link.charAt(0) === '/' ? props.item.link : `/${props.item.link}`\r\n  const Icon = props.item.icon && Feather[props.item.icon] ? Feather[props.item.icon] : null\r\n  return (\r\n    <li className='nav-item'>\r\n      <NavLink to={url} activeClassName='active'>\r\n        {props.item.icon && Icon && <Icon className='side-nav-icon' />}\r\n        <span className='nav-item-label'>{props.item.title}</span>\r\n      </NavLink>\r\n    </li>\r\n  )\r\n}\r\n\r\nNavbarItem.propTypes = {\r\n  item: PropTypes.object\r\n}\r\n\r\nexport default NavbarItem\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport PropTypes from 'prop-types'\r\nimport NavbarLogo from './NavbarLogo'\r\nimport NavbarSpacer from './NavbarSpacer'\r\nimport NavbarItem from './NavbarItem'\r\n\r\n// const LOGO = './../../imgs/logo.png'\r\nconst LOGO = 'https://www.freelogodesign.org/Content/img/logo-ex-7.png'\r\nconst LOGO_TEXT = 'this is a logo'\r\n\r\nclass Navbar extends Component {\r\n  constructor (props) {\r\n    super()\r\n    this.state = {\r\n      menu: props.menu\r\n    }\r\n  }\r\n\r\n  render () {\r\n    const items = this.state.menu.items.map((item, i) => (\r\n      <div key={i}>\r\n        <NavbarItem item={item} />\r\n        <NavbarSpacer />\r\n      </div>\r\n    ))\r\n    return (\r\n      <nav className='app-sidebar'>\r\n        <NavbarLogo logo={LOGO} logoText={LOGO_TEXT} />\r\n        {items}\r\n      </nav>\r\n    )\r\n  }\r\n};\r\n\r\nNavbar.propTypes = {\r\n  menu: PropTypes.object\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  menu: state.navbarPage.menu\r\n})\r\n\r\nexport default connect(mapStateToProps, null)(Navbar)\r\n","import Navbar from './Navbar'\r\nimport { connect } from 'react-redux'\r\n\r\nconst mapStateToProps = (state) => ({\r\n  menu: state.navbarPage.menu\r\n})\r\n\r\nexport default connect(mapStateToProps, null)(Navbar)\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { createInputField } from './../common/FormControls/FormControls'\r\n\r\nexport const LoginFormInput = ({ fieldName, placeholder, validate, label = '', type = 'input' }) =>\r\n  (\r\n    <div className='form-group row'>\r\n      {label && <label htmlFor={fieldName} className='col-md-4 col-form-label text-md-right'>{label}</label>}\r\n      <div className='col-md-6'>\r\n        {createInputField(placeholder, fieldName, validate, { type })}\r\n      </div>\r\n    </div>\r\n  )\r\nLoginFormInput.propTypes = {\r\n  fieldName: PropTypes.string,\r\n  placeholder: PropTypes.string,\r\n  type: PropTypes.string,\r\n  validate: PropTypes.array,\r\n  label: PropTypes.string\r\n}\r\n\r\nexport const LoginFormCheckBox = ({ fieldName, label = '' }) => (\r\n  <div className='form-group row'>\r\n    <div className='col-md-6 offset-md-4'>\r\n      <div className='checkbox'>\r\n        <label>\r\n          {createInputField('', fieldName, [], { type: 'checkbox' })} {label}\r\n        </label>\r\n      </div>\r\n    </div>\r\n  </div>\r\n)\r\nLoginFormCheckBox.propTypes = {\r\n  fieldName: PropTypes.string,\r\n  label: PropTypes.string\r\n}\r\n\r\nexport const LoginFormError = ({ error }) => (\r\n  <div className='form-group row'>\r\n    <div className='col-md-6 offset-md-4'>\r\n      <p className='text-danger'> {error} </p>\r\n    </div>\r\n  </div>\r\n)\r\nLoginFormError.propTypes = {\r\n  error: PropTypes.string\r\n}\r\n\r\nexport const LoginFormButton = ({ name }) => (\r\n  <div className='col-md-6 offset-md-4'>\r\n    <button type='submit' className='btn btn-primary'>\r\n      {name}\r\n    </button>\r\n  </div>\r\n)\r\nLoginFormButton.propTypes = {\r\n  name: PropTypes.string\r\n}\r\n","import React from 'react'\r\nimport { reduxForm } from 'redux-form'\r\nimport PropTypes from 'prop-types'\r\n\r\n// import { required } from './../../utils/validators/validators'\r\nimport { LOGIN_FORM_NAME } from './../../redux/auth-reducer'\r\nimport { LoginFormInput, LoginFormCheckBox, LoginFormError, LoginFormButton } from './LoginFormFields'\r\n\r\nconst LoginForm = ({ error, handleSubmit }, ...props) => (\r\n  <form onSubmit={() => { handleSubmit() }}>\r\n\r\n    <LoginFormInput\r\n      fieldName='email'\r\n      type='input'\r\n      placeholder='Email'\r\n      validate={[]} // {[required]}\r\n      label='E-Mail Address'\r\n      {...props}\r\n    />\r\n\r\n    <LoginFormInput\r\n      fieldName='password'\r\n      placeholder='Password'\r\n      type='password'\r\n      validate={[]} // {[required]}\r\n      label='Password'\r\n      {...props}\r\n    />\r\n\r\n    <LoginFormCheckBox fieldName='rememberMe' label='Remember Me' />\r\n\r\n    {error && <LoginFormError error={error} />}\r\n\r\n    <LoginFormButton name='Login' />\r\n\r\n  </form>)\r\n\r\nLoginForm.propTypes = {\r\n  error: PropTypes.string,\r\n  handleSubmit: PropTypes.func\r\n}\r\n\r\nexport default reduxForm({ form: LOGIN_FORM_NAME })(LoginForm)\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport LoginFrom from './LoginForm'\r\n\r\nconst Login = ({ handleLoginUser }) => {\r\n  const handleLoginSubmit = (values) => {\r\n    if (values.email && values.password) {\r\n      handleLoginUser(values.email, values.password, !!values.rememberMe)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <main className='login-form'>\r\n      <div className='container'>\r\n        <div className='row justify-content-center'>\r\n          <div className='col-md-8'>\r\n            <div className='card'>\r\n              <div className='card-header'>Login</div>\r\n              <div className='card-body'>\r\n                <LoginFrom onSubmit={handleLoginSubmit} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </main>\r\n\r\n  )\r\n}\r\n\r\nLogin.propTypes = {\r\n  handleLoginUser: PropTypes.func\r\n}\r\n\r\nexport default Login\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport {\r\n  setUserData,\r\n  getAuthUserThunkCreator,\r\n  loginUserThunkCreator\r\n} from '../../redux/auth-reducer'\r\nimport Login from './Login'\r\n// import { Redirect } from 'react-router-dom'\r\nimport Preloader from '../common/Preloader/Preloader'\r\n\r\nconst LoginContainer = ({ loginUser, isFetching, isAuth }) => {\r\n  if (isFetching) return <Preloader />\r\n\r\n  if (isAuth) return null\r\n  return <Login handleLoginUser={loginUser} />\r\n}\r\n\r\nLoginContainer.propTypes = {\r\n  isAuth: PropTypes.bool,\r\n  isFetching: PropTypes.bool,\r\n  loginUser: PropTypes.func\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  userData: state.usersPage.userData,\r\n  isAuth: state.auth.isAuth,\r\n  isFetching: state.auth.isFetching\r\n})\r\n\r\nexport default connect(mapStateToProps, {\r\n  setUserData,\r\n  getAuthUser: getAuthUserThunkCreator,\r\n  loginUser: loginUserThunkCreator\r\n})(LoginContainer)\r\n","import React from 'react'\nimport { Route, withRouter } from 'react-router-dom'\nimport PropTypes from 'prop-types'\n// import './App.css'\nimport './scss/styles.scss'\nimport { compose } from 'redux'\nimport { connect } from 'react-redux'\nimport { initializeThunkCreator } from './redux/app-reducer'\nimport { withSuspense } from './components/hoc/withSuspense'\nimport HeaderContainer from './components/Header/HeaderContainer'\nimport NavbarContainer from './components/Navbar/NavbarContainer'\nimport LoginContainer from './components/Login/LoginContainer'\nimport Preloader from './components/common/Preloader/Preloader'\n\nconst ProfileContainer = React.lazy(() => import('./components/Profile/ProfileContainer'))\nconst PostsContainer = React.lazy(() => import('./components/Posts/PostsContainer'))\nconst MessagesContainer = React.lazy(() => import('./components/Messages/MessagesContainer'))\nconst UsersContainer = React.lazy(() => import('./components/Users/UsersContainer'))\n\nclass App extends React.Component {\n  componentDidMount () {\n    this.props.initialize()\n  }\n\n  render () {\n    if (!this.props.isInit) {\n      return <Preloader />\n    }\n\n    return (\n      <React.Suspense fallback={<Preloader />}>\n        <div className='app-body'>\n          <NavbarContainer />\n          <div className='page-content'>\n            <HeaderContainer />\n            <div className='primary-content' role='main' tabIndex='-1'>\n              <Route path='/login' render={() => <LoginContainer />} />\n              <Route path='/profile/:userId' render={withSuspense(ProfileContainer)} />\n              <Route path='/myprofile/' render={withSuspense(ProfileContainer)} />\n              <Route path='/posts' render={withSuspense(PostsContainer)} />\n              <Route path='/messages' render={withSuspense(MessagesContainer)} />\n              <Route path='/users' render={withSuspense(UsersContainer)} />\n            </div>\n          </div>\n        </div>\n      </React.Suspense>\n    )\n  }\n}\n\nApp.propTypes = {\n  isInit: PropTypes.bool,\n  initialize: PropTypes.func\n}\n\nconst mapStateToProps = (state) => ({\n  isInit: state.app.isInit\n})\n\nexport default compose(\n  withRouter,\n  connect(mapStateToProps, { initialize: initializeThunkCreator }))(App)\n","import ReactDOM from 'react-dom'\nimport React from 'react'\nimport store from './redux/redux-store'\nimport { BrowserRouter } from 'react-router-dom'\nimport { Provider } from 'react-redux'\nimport App from './App'\n// import './index.css'\n\nconst render = () => {\n  ReactDOM.render(\n    <BrowserRouter basename={process.env.PUBLIC_URL}>\n      <Provider store={store}>\n        <App />\n      </Provider>\n    </BrowserRouter>,\n    document.getElementById('root'))\n}\nstore.subscribe(render)\nrender()\n","const state = {\r\n  navbarPage: {\r\n    menu: {\r\n      items: [\r\n        {\r\n          title: 'Profile',\r\n          link: '/myprofile'\r\n        },\r\n        {\r\n          title: 'Posts',\r\n          link: '/posts'\r\n        },\r\n        {\r\n          title: 'Messages',\r\n          link: '/messages'\r\n        },\r\n        /*         {\r\n          title: 'Friends',\r\n          link: '/friends'\r\n        }, */\r\n        {\r\n          title: 'Users',\r\n          link: '/users'\r\n        }\r\n        /*        {\r\n          title: 'Settings',\r\n          link: '/settings'\r\n        } */\r\n      ]\r\n    }\r\n  },\r\n  messagesPage: {\r\n    dialogs: [\r\n      { id: 1, user: 'John' },\r\n      { id: 2, user: 'Mark' },\r\n      { id: 3, user: 'Helen' },\r\n      { id: 4, user: 'Lucy' }\r\n    ],\r\n    messages: [\r\n      { id: '1', text: 'Hello' },\r\n      { id: '2', text: 'How are you?' },\r\n      { id: '3', text: 'Do you know React?' }\r\n    ]\r\n  },\r\n\r\n  profilePage: {\r\n    posts: [\r\n      { id: '1', text: 'my post 1' },\r\n      { id: '2', text: 'my post 2' },\r\n      { id: '3', text: 'my post 3' },\r\n      { id: '4', text: 'my post 4' }\r\n    ],\r\n    newPostText: ''\r\n  },\r\n\r\n  usersPage: {\r\n    users: [\r\n      {\r\n        id: 1,\r\n        name: 'John Doe'\r\n      }, {\r\n        id: 2,\r\n        name: 'Anna Miles'\r\n      }, {\r\n        id: 3,\r\n        name: 'Kate Smith'\r\n      }, {\r\n        id: 4,\r\n        name: 'Jack Jackson'\r\n      }\r\n    ]\r\n  }\r\n}\r\n\r\nexport default state\r\nwindow.state = state\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Field } from 'redux-form'\r\nimport { Input } from 'reactstrap'\r\n\r\nexport const FormControl = ({ input, meta, ...props }) => {\r\n  const isInvalid = meta.touched && meta.error\r\n  return (\r\n    <div>\r\n      {props.children}\r\n      {isInvalid &&\r\n        <div className='inline m-b-none m-t-none abs invalid-feedback'>\r\n          {meta.error}\r\n        </div>}\r\n    </div>\r\n  )\r\n}\r\nFormControl.propTypes = {\r\n  children: PropTypes.object,\r\n  input: PropTypes.object,\r\n  meta: PropTypes.object\r\n}\r\n\r\nexport const TextareaControl = (props) => {\r\n  const { input, meta, children, ...restProps } = props\r\n  return <FormControl {...props}><textarea {...input} {...restProps} /></FormControl>\r\n}\r\nTextareaControl.propTypes = {\r\n  children: PropTypes.object,\r\n  input: PropTypes.object,\r\n  meta: PropTypes.object\r\n}\r\n\r\nexport const InputControl = (props) => {\r\n  const { input, meta, children, ...restProps } = props\r\n  return <FormControl {...props}><Input {...input} {...restProps} /></FormControl>\r\n}\r\nInputControl.propTypes = {\r\n  children: PropTypes.object,\r\n  input: PropTypes.object,\r\n  meta: PropTypes.object\r\n}\r\n\r\nexport const createInputField = (placeholder, name, validators, props = {}, text = '') => (\r\n  <div>\r\n    <Field\r\n      component={InputControl}\r\n      name={name}\r\n      placeholder={placeholder}\r\n      validate={validators}\r\n      {...props}\r\n    /> {text}\r\n  </div>\r\n)\r\n","\r\nimport API from './../services/api'\r\nimport { stopSubmit } from 'redux-form'\r\nimport { requestData } from './generic'\r\n\r\nexport const NEW_EDIT_PROFILE_FORM_NAME = 'profileDataForm'\r\nconst SET_USER_PROFILE = 'profile/SET-USER-PROFILE'\r\nconst SET_USER_ID = 'profile/SET-USER-ID'\r\nconst SET_IS_FETCHING = 'profile/SET-IS-FETCHING'\r\nconst SET_IS_UPDATING = 'profile/SET-IS-UPDATING'\r\nconst SET_STATUS = 'profile/SET-STATUS'\r\nconst SET_IS_FOLLOW_STATUS_FETCHING = 'profile/SET-IS-FOLLOW-STATUS-FETCHING'\r\nconst RESET_PROFILE = 'profile/RESET-PROFILE'\r\nconst FOLLOW = 'profile/FOLLOW'\r\nconst UNFOLLOW = 'profile/UNFOLLOW'\r\n\r\nexport const setUserProfile = userProfile => ({ type: SET_USER_PROFILE, userProfile })\r\nexport const setUserId = userId => ({ type: SET_USER_ID, userId })\r\nexport const setIsFetching = isFetching => ({ type: SET_IS_FETCHING, isFetching })\r\nexport const setIsUpdating = isUpdating => ({ type: SET_IS_FETCHING, isUpdating })\r\nexport const setStatus = status => ({ type: SET_STATUS, status })\r\nexport const setIsFollowStatusFetching = isFollowStatusFetching => ({ type: SET_IS_FOLLOW_STATUS_FETCHING, isFollowStatusFetching })\r\nexport const resetProfile = () => ({ type: RESET_PROFILE })\r\nexport const setFollowed = (userId) => ({ type: FOLLOW, userId })\r\nexport const setUnfollowed = (userId) => ({ type: UNFOLLOW, userId })\r\n\r\nconst initState = {\r\n  isProfileFetching: false,\r\n  isUpdating: false,\r\n  userProfile: {},\r\n  userId: 2,\r\n  followed: false,\r\n  isFollowStatusFetching: false,\r\n  status: ''\r\n}\r\n\r\nconst _getUserProfile = async (userId, dispatch) => {\r\n  try {\r\n    dispatch(setIsFetching(true))\r\n    const response = await API.getUserProfile(userId)\r\n    dispatch(setUserProfile(response.data))\r\n    dispatch(setUserId(userId))\r\n  } catch (error) {\r\n    console.error('get profile error', error)\r\n  } finally {\r\n    dispatch(setIsFetching(false))\r\n  }\r\n}\r\n\r\nconst _getFollowStatus = async (userId, dispatch) => {\r\n  dispatch(setIsFollowStatusFetching(true))\r\n  try {\r\n    const response = await API.getUserFollow(userId)\r\n    if (response.data) {\r\n      dispatch(setFollowed())\r\n    } else {\r\n      dispatch(setUnfollowed())\r\n    }\r\n  } finally {\r\n    dispatch(setIsFollowStatusFetching(false))\r\n  }\r\n}\r\n\r\nexport const getUserProfileThunkCreator = (userId) => (dispatch) => {\r\n  dispatch(resetProfile())\r\n  _getUserProfile(userId, dispatch)\r\n  _getFollowStatus(userId, dispatch)\r\n}\r\n\r\nexport const getUserProfileStatusThunkCreator = (userId) => async (dispatch) => {\r\n  try {\r\n    const response = await API.getUserProfileStatus(userId)\r\n    dispatch(setStatus(response.data))\r\n  } catch (error) {\r\n    console.error('get status error', error)\r\n  }\r\n}\r\n\r\nexport const changeUserProfileStatusThunkCreator = (status) => async (dispatch) => {\r\n  try {\r\n    await API.putUserProfileStatus(status)\r\n    dispatch(setStatus(status))\r\n  } catch (error) {\r\n    console.error('put status', error)\r\n  }\r\n}\r\n\r\nexport const getAuthUserProfileThunkCreator = () => async (dispatch) => {\r\n  dispatch(setIsFetching(true))\r\n  try {\r\n    const response = await API.getAuthUser()\r\n    if (response.data && response.data.resultCode === 0) {\r\n      const userData = response.data && response.data.data\r\n      _getUserProfile(userData.id, dispatch)\r\n    }\r\n  } finally {\r\n    dispatch(setIsFetching(false))\r\n  }\r\n}\r\n\r\nconst getContactError = (error) => {\r\n  const regExp = /(?<=->).+?(?=\\))/g\r\n  const errorContactField = error.match(regExp)\r\n  if (errorContactField.length) {\r\n    const obj = {}\r\n    obj[errorContactField[0].toLowerCase()] = error\r\n    return { contacts: obj }\r\n  }\r\n  return null\r\n}\r\n\r\nexport const changeUserProfileThunkCreator = (data) => async (dispatch) => {\r\n  dispatch(setIsUpdating(true))\r\n  try {\r\n    const response = await API.putUserProfile(data)\r\n    if (response.data && response.data.resultCode === 0) {\r\n      _getUserProfile(data.userId, dispatch)\r\n    } else {\r\n      // const error = response.data.messages.length ? response.data.messages[0] : 'Something wrong...'\r\n      const errorArr = response.data && response.data.messages && response.data.messages.map(error => getContactError(error))\r\n      dispatch(stopSubmit(NEW_EDIT_PROFILE_FORM_NAME, errorArr[0]))\r\n    }\r\n  } finally {\r\n    dispatch(setIsUpdating(false))\r\n  }\r\n}\r\n\r\nexport const getUserFollowStatusThunkCreator = (userId) => (dispatch) => {\r\n  _getFollowStatus(userId, dispatch)\r\n}\r\n\r\nexport const followThunkCreator = (userId) => async (dispatch) => {\r\n  requestData(dispatch, API.postUserFollow, setIsFollowStatusFetching, setFollowed, userId)\r\n}\r\n\r\nexport const unfollowThunkCreator = (userId) => async (dispatch) => {\r\n  requestData(dispatch, API.deleteUserFollow, setIsFollowStatusFetching, setUnfollowed, userId)\r\n}\r\n\r\nconst profileReducer = (state = initState, action = {}) => {\r\n  switch (action.type) {\r\n    case SET_IS_FETCHING: {\r\n      return { ...state, isProfileFetching: action.isFetching }\r\n    }\r\n    case SET_IS_UPDATING: {\r\n      return { ...state, isUpdating: action.isUpdating }\r\n    }\r\n    case SET_USER_PROFILE: {\r\n      return { ...state, userProfile: action.userProfile }\r\n    }\r\n    case SET_USER_ID: {\r\n      return { ...state, userId: action.userId }\r\n    }\r\n    case SET_STATUS: {\r\n      return { ...state, status: action.status }\r\n    }\r\n    case SET_IS_FOLLOW_STATUS_FETCHING: {\r\n      return { ...state, isFollowStatusFetching: action.isFollowStatusFetching }\r\n    }\r\n    case FOLLOW: {\r\n      return { ...state, followed: true }\r\n    }\r\n    case UNFOLLOW: {\r\n      return { ...state, followed: false }\r\n    }\r\n    case RESET_PROFILE: {\r\n      return { ...state, followed: false, userProfile: null, userId: null, status: null }\r\n    }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport default profileReducer\r\n","\r\nimport moment from 'moment'\r\nimport API from '../services/api'\r\nimport { reset } from 'redux-form'\r\n\r\nexport const NEW_POST_FORM_NAME = 'profileNewPost'\r\n\r\nexport const SET_POSTS = 'posts/SET-POSTS'\r\nexport const ADD_POST = 'posts/ADD-POST'\r\nexport const EDIT_NEW_POST = 'posts/EDIT-NEW-POST'\r\nexport const SET_IS_FETCHING = 'posts/SET-IS-FETCHING'\r\n\r\nexport const setPosts = posts => ({ type: SET_POSTS, posts })\r\nexport const addPost = post => ({ type: ADD_POST, post })\r\nexport const editPost = post => ({ type: EDIT_NEW_POST, post })\r\nexport const setIsFetching = isFetching => ({ type: SET_IS_FETCHING, isFetching })\r\n\r\nconst initState = {\r\n  posts: [],\r\n  arePostsFetching: false\r\n}\r\n\r\nconst createNewPost = (text) => ({\r\n  id: `f${(+(new Date())).toString(16)}`,\r\n  text,\r\n  datetime: moment().format('YYYY-MM-DD HH:mm')\r\n})\r\n\r\nconst putPosts = async (dispatch, data, formName) => {\r\n  try {\r\n    const response = await API.putPosts(data)\r\n    dispatch(setIsFetching(false))\r\n    const posts = response.data.data.posts\r\n    dispatch(setPosts({ posts }))\r\n    if (formName) {\r\n      dispatch(reset(formName))\r\n    }\r\n  } catch (error) {\r\n    console.error('put posts error', error)\r\n  }\r\n}\r\n\r\nconst getPosts = async (dispatch) => {\r\n  try {\r\n    dispatch(setIsFetching(true))\r\n    const response = await API.getPosts()\r\n    let posts = []\r\n    if (response.data && response.data.data) {\r\n      dispatch(setIsFetching(false))\r\n      posts = response.data.data.posts\r\n    }\r\n    return posts\r\n  } catch (error) {\r\n    console.error('get posts error', error)\r\n    return null\r\n  }\r\n}\r\n\r\nexport const getPostsThunkCreator = (userId = 1) => async (dispatch) => {\r\n  const posts = await getPosts(dispatch)\r\n  dispatch(setPosts({ posts }))\r\n}\r\n\r\nexport const addNewPostThunkCreator = (text, userId = 1) => async (dispatch) => {\r\n  const posts = await getPosts(dispatch)\r\n  if (posts) {\r\n    putPosts(dispatch, { userId, posts: [...posts, createNewPost(text)] }, NEW_POST_FORM_NAME)\r\n  }\r\n}\r\n\r\nexport const deletePostThunkCreator = (postId, userId = 1) => async (dispatch) => {\r\n  let posts = await getPosts(dispatch)\r\n  if (posts) {\r\n    posts = posts.filter((post) => post.id !== postId)\r\n    putPosts(dispatch, { userId, posts: [...posts] })\r\n  }\r\n}\r\n\r\nconst postsReducer = (state = initState, action = {}) => {\r\n  const stateCopy = { ...state }\r\n  switch (action.type) {\r\n    case SET_POSTS: {\r\n      return {\r\n        ...state,\r\n        ...action.posts\r\n      }\r\n    }\r\n    case ADD_POST: {\r\n      return {\r\n        ...state,\r\n        posts: [...state.posts, { id: state.posts.length, text: action.post }]\r\n      }\r\n    }\r\n    case EDIT_NEW_POST: {\r\n      stateCopy.newPostText = action.post.text\r\n      return stateCopy\r\n    }\r\n    case SET_IS_FETCHING: {\r\n      return { ...state, arePostsFetching: action.isFetching }\r\n    }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport default postsReducer\r\n","\r\nexport const updateObjectInArrayByValue = (items, itemValue, objPropName, newObjProps) => {\r\n  return items.map(item => {\r\n    if (item[objPropName] === itemValue) {\r\n      return { ...item, ...newObjProps }\r\n    }\r\n    return item\r\n  })\r\n}\r\n","import API from '../services/api'\r\nimport { updateObjectInArrayByValue } from './../utils/helpers/objects'\r\nimport { requestData } from './generic'\r\n\r\nconst SET_USERS = 'users/SET-USERS'\r\nconst SET_TOTAL_USER_COUNT = 'users/SET-TOTAL-USER-COUNT'\r\nconst SET_PAGE_COUNT = 'users/SET-PAGE-COUNT'\r\nconst SET_CURRENT_PAGE = 'users/SET-CURRENT-PAGE'\r\nconst SET_IS_FETCHING = 'users/SET-IS-FETCHING'\r\nconst FOLLOW = 'users/FOLLOW'\r\nconst UNFOLLOW = 'users/UNFOLLOW'\r\nconst SET_IS_FOLLOWING_PROGRESS = 'users/SET_IS_FOLLOWING_PROGRESS'\r\n\r\nexport const setUsers = users => ({ type: SET_USERS, users })\r\nexport const setTotalUserCount = totalUserCount => ({ type: SET_TOTAL_USER_COUNT, totalUserCount })\r\nexport const setPageCount = pageCount => ({ type: SET_PAGE_COUNT, pageCount })\r\nexport const setCurrentPage = currentPage => ({ type: SET_CURRENT_PAGE, currentPage })\r\nexport const setIsFetching = isFetching => ({ type: SET_IS_FETCHING, isFetching })\r\nexport const setIsFollowingProgress = (isFetching, userId) => ({ type: SET_IS_FOLLOWING_PROGRESS, isFetching, userId })\r\nexport const setFollow = (userId) => ({ type: FOLLOW, userId })\r\nexport const setUnfollow = (userId) => ({ type: UNFOLLOW, userId })\r\n\r\nconst initState = {\r\n  users: [],\r\n  pageSize: 50,\r\n  totalUserCount: 0,\r\n  currentPage: 1,\r\n  isFetching: false,\r\n  followingInProgress: []\r\n}\r\n\r\nexport const getUsersThunkCreator = (currentPage, pageSize) => async (dispatch) => {\r\n  dispatch(setIsFetching(true))\r\n  dispatch(setUsers([]))\r\n  dispatch(setTotalUserCount(0))\r\n\r\n  const response = await API.getUsers(currentPage, pageSize)\r\n  if (response.data) {\r\n    const totalUserCount = response.data.totalCount || 0\r\n    const pageCount = Math.ceil(totalUserCount / pageSize)\r\n\r\n    dispatch(setUsers(response.data.items))\r\n    dispatch(setTotalUserCount(totalUserCount))\r\n    dispatch(setPageCount(pageCount))\r\n    dispatch(setCurrentPage(currentPage))\r\n    dispatch(setIsFetching(false))\r\n  }\r\n}\r\n\r\nexport const followThunkCreator = (userId) => async (dispatch) => {\r\n  requestData(dispatch, API.postUserFollow, setIsFollowingProgress, setFollow, userId)\r\n}\r\n\r\nexport const unfollowThunkCreator = (userId) => async (dispatch) => {\r\n  requestData(dispatch, API.deleteUserFollow, setIsFollowingProgress, setUnfollow, userId)\r\n}\r\n\r\nconst usersReducer = (state = initState, action = {}) => {\r\n  switch (action.type) {\r\n    case SET_USERS: {\r\n      return { ...state, users: action.users }\r\n    }\r\n    case SET_TOTAL_USER_COUNT: {\r\n      return { ...state, totalUserCount: action.totalUserCount }\r\n    }\r\n    case SET_PAGE_COUNT: {\r\n      return { ...state, pageCount: action.pageCount }\r\n    }\r\n    case SET_CURRENT_PAGE: {\r\n      return { ...state, currentPage: action.currentPage }\r\n    }\r\n    case SET_IS_FETCHING: {\r\n      return { ...state, isFetching: action.isFetching }\r\n    }\r\n    case FOLLOW:\r\n      return {\r\n        ...state,\r\n        users: updateObjectInArrayByValue(state.users, action.userId, 'id', { followed: true })\r\n      }\r\n    case UNFOLLOW:\r\n      return {\r\n        ...state,\r\n        users: updateObjectInArrayByValue(state.users, action.userId, 'id', { followed: false })\r\n      }\r\n    case SET_IS_FOLLOWING_PROGRESS: {\r\n      return {\r\n        ...state,\r\n        followingInProgress: action.isFetching\r\n          ? [...state.followingInProgress, action.userId]\r\n          : state.followingInProgress.filter(id => id !== action.userId)\r\n      }\r\n    }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport default usersReducer\r\n"],"sourceRoot":""}